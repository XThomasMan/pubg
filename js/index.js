var res=["../img/bg/bg-index-1.jpg","../img/bg/bg-index-2.jpg","../img/bg/bg-index-3.jpg","../img/bg/bg-index-4.jpg","../img/bg/bg-index-5.jpg","../img/bg/bg-index-6.jpg","../img/bg/bg-index-7.jpg","../img/bg/bg-index-8.jpg","../img/bg/bg-index-9.jpg","../img/bg/bg-index-10.jpg","../img/bg/bg-index-11.jpg","../img/bg/bg-index-12.jpg","../img/bg/bg-index-13.jpg","../img/bg/bg-index-14.jpg","../img/bg/bg-index-15.jpg","../img/bg/bg-index-16.jpg","../img/bg/bg-index-17.jpg","../img/bg/bg-index-18.jpg","../img/bg/bg-index-19.jpg","../img/bg/bg-index-20.jpg","../img/bg-guide.png","../img/sprites-widget.png","../img/sprites-title.png","../img/bg-kv.jpg","../img/sprites-kv.png","../img/text/bg-text-1.png","../img/text/bg-text-2.png","../img/text/bg-text-3.png","../img/text/bg-text-4.png","../img/text/bg-text-5.png","../img/text/bg-text-6.png","../img/text/bg-text-7.png","../img/text/bg-text-8.png","../img/text/bg-text-9.png","../img/text/bg-text-10.png","../img/text/bg-text-11.png"],myScroll={},pageH=603,pageW=375,width=window.innerWidth,height=window.innerHeight,pageRatio=pageH/pageW,windowRatio=height/width,questionIndex=0,isMove=!1,questionPosition=[1844,4294,8526,11038,13316,15798,19250,21398,24132,25636],answer=[2,2,1,4,1,2,3,4,[1,4,6,7,8],4],question9=[],multiple=.5*(height/pageH)/(windowRatio/pageRatio),isScope=!1,$guide=$("#guide"),IndexPage={init:function(){document.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),this.loading()},loading:function(){var e=this;new mo.Loader(res,{loadType:1,minTime:300,onLoading:function(e,i){var n=parseInt(e/i*100);$("#progressBar").css("transform","translate("+(-100+n)+"%, 0)"),setTimeout(function(){$("#doll").html(n+"%")},0)},onComplete:function(){$("#loading").addClass("hide"),e.action(),e.bindEvents()}})},reset:function(){questionIndex=0,myScroll.scrollTo(0,0),question9=[],$(".btn").removeClass("active"),$("#kv").addClass("hide")},action:function(){$(".windows, #guide").addClass("active"),myScroll=new IScroll("#wrapper",{mouseWheel:!0,bounceTime:1e3,bounceLock:!0,preventDefault:!0,probeType:3}),myScroll.on("scroll",function(){isMove=!0,$guide.removeClass("active");var e=-questionPosition[questionIndex]*multiple;this.y<=e&&($(".page-question-"+(parseInt(questionIndex)+1)).addClass("active"),myScroll.scrollTo(0,e),isScope=!0)}),myScroll.on("scrollStart",function(){isMove=!0}),myScroll.on("scrollEnd",function(){isMove=!1})},showKV:function(e){$("#kv").removeClass("hide");var i="./img/text/bg-text-"+e+".png";$("#text").attr("src",i),$("#chicken").addClass("active")},bindEvents:function(){function e(e,i){for(var n=0;n<e.length;n++)if(e[n]==i){e.splice(n,1);break}}var i=this;$(".btn").on("touchend",function(){if(!isMove){var n=$(this),t=n.data("value");if(n.hasClass("btn-3"))n.hasClass("active")?(n.removeClass("active"),e(question9,parseInt(t))):(n.addClass("active"),question9.push(parseInt(t)));else if(n.hasClass("btn-4")){for(var g=0,s=0;s<answer[questionIndex].length;s++)if(question9.length>0)for(var o=0;o<question9.length;o++)answer[questionIndex][s]===question9[o]&&g++;g==answer[questionIndex].length?($guide.addClass("active"),questionIndex++,isScope=!1):i.showKV(parseInt(questionIndex)+1)}else n.siblings(".btn").hasClass("active")||n.hasClass("active")||(n.addClass("active"),parseInt(t)==answer[questionIndex]?9==questionIndex?i.showKV(11):(0==questionIndex&&$guide.addClass("active"),questionIndex++,isScope=!1):i.showKV(parseInt(questionIndex)+1))}}),$("#reset").on("touchend",i.reset)}};$(function(){IndexPage.init()});