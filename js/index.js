var res=["../img/bg/bg-index-1.jpg","../img/bg/bg-index-2.jpg","../img/bg/bg-index-3.jpg","../img/bg/bg-index-4.jpg","../img/bg/bg-index-5.jpg","../img/bg/bg-index-6.jpg","../img/bg/bg-index-7.jpg","../img/bg/bg-index-8.jpg","../img/bg/bg-index-9.jpg","../img/bg/bg-index-10.jpg","../img/bg/bg-index-11.jpg","../img/bg/bg-index-12.jpg","../img/bg/bg-index-13.jpg","../img/bg/bg-index-14.jpg","../img/bg/bg-index-15.jpg","../img/bg/bg-index-16.jpg","../img/bg/bg-index-17.jpg","../img/bg/bg-index-18.jpg","../img/bg/bg-index-19.jpg","../img/bg/bg-index-20.jpg","../img/bg-guide.png","../img/sprites-widget.png","../img/sprites-title.png"],pageH=603,pageW=375,width=window.innerWidth,height=window.innerHeight,pageRatio=pageH/pageW,windowRatio=height/width,questionIndex=0,isMove=!1,questionPosition=[1844,4294,8526,11038,13316,15798,19250,21398,24132,25636],answer=[2,2,1,4,1,2,3,4,[1,4,6,7,8],4],question9=[],multiple=.5*(height/pageH)/(windowRatio/pageRatio),isScope=!1,IndexPage={init:function(){document.addEventListener("touchmove",function(e){e.preventDefault()},{passive:!1}),this.loading()},loading:function(){var e=this;new mo.Loader(res,{loadType:1,minTime:300,onLoading:function(e,i){var n=parseInt(e/i*100);$("#progressBar").css("transform","translate("+(-100+n)+"%, 0)"),setTimeout(function(){$("#doll").html(n+"%")},0)},onComplete:function(){$("#loading").addClass("hide"),e.action(),e.bindEvents()}})},action:function(){$(".windows").addClass("active");var e=new IScroll("#wrapper",{mouseWheel:!0,bounceTime:1e3,bounceLock:!0,preventDefault:!0,probeType:3});e.on("scroll",function(){isMove=!0;var i=-questionPosition[questionIndex]*multiple;this.y<=i&&($(".page-question-"+(parseInt(questionIndex)+1)).addClass("active"),e.scrollTo(0,i),isScope=!0)}),e.on("scrollStart",function(){isMove=!0}),e.on("scrollEnd",function(){isMove=!1})},bindEvents:function(){function e(e,i){for(var n=0;n<e.length;n++)if(e[n]==i){e.splice(n,1);break}}$(".btn").on("touchend",function(){if(!isMove){var i=$(this),n=i.data("value");if(i.hasClass("btn-3"))i.hasClass("active")?(i.removeClass("active"),e(question9,parseInt(n))):(i.addClass("active"),question9.push(parseInt(n)));else if(i.hasClass("btn-4")){for(var t=0,g=0;g<answer[questionIndex].length;g++)if(question9.length>0)for(var s=0;s<question9.length;s++)answer[questionIndex][g]===question9[s]&&t++;t==answer[questionIndex].length?(questionIndex++,isScope=!1):location.href="/kv.html?question="+(parseInt(questionIndex)+1)}else i.siblings(".btn").hasClass("active")||(i.addClass("active"),parseInt(n)==answer[questionIndex]?9==questionIndex?location.href="/kv.html?question="+(parseInt(questionIndex)+1):(questionIndex++,isScope=!1):location.href="/kv.html?question="+(parseInt(questionIndex)+1))}})}};$(function(){IndexPage.init()});